"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var observable_1 = require("tns-core-modules/data/observable");
var page_1 = require("tns-core-modules/ui/page");
var observable_array_1 = require("tns-core-modules/data/observable-array");
var animation_1 = require("tns-core-modules/ui/animation/animation");
var firebase = require('../../../utils/firebase').I;
var user = require('../../../viewmodels/user').I;
var monthStrings = [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Augt",
    "Sep",
    "Oct",
    "Nov",
    "Dec"
];
var appViewModel = /** @class */ (function (_super) {
    __extends(appViewModel, _super);
    function appViewModel(page) {
        var _this = _super.call(this) || this;
        _this.appointments = new observable_array_1.ObservableArray();
        _this.faButtonAnimation = new Array();
        _this.upcomingAppointmentsListView = page_1.getViewById(page, 'upcoming-appointments');
        _this.page = page;
        _this.setupAnimations();
        var uid = user.getTotalData().uid;
        firebase.getAppointments(uid)
            .then(function (result) {
            for (var key in result.value) {
                firebase.getValueFirebase('appointments/' + result.value[key].key)
                    .then(function (result) {
                    var app = result.value;
                    console.log(result.value);
                    app.fullName = app.recieverFirstName + ' ' + app.recieverLastName;
                    app.timeString = _this._parseDate(app.date, app.month, app.startTime, app.endTime);
                    _this.appointments.push(result.value);
                });
            }
        });
        return _this;
    }
    appViewModel.prototype.fabTap = function (args) {
        var page = args.object.page;
        console.log("click");
        this.faButtonAnimationSet.play().then(function () { return page.frame.navigate("/views/home/app-page/choose-mentor-page/choose-mentor-page"); });
    };
    appViewModel.prototype._dateParser = function (date) {
        return (date.getMonth() + 1) + "/" + date.getDate() + "/" + date.getFullYear();
    };
    appViewModel.prototype.onAppointmentTap = function (args) {
        console.log(args.index);
    };
    appViewModel.prototype._parseDate = function (day, month, startTime, endTime) {
        return (monthStrings[month] + ' ' + day + ', ' + startTime + ' - ' + endTime);
    };
    appViewModel.prototype.setupAnimations = function () {
        this.faButton = page_1.getViewById(this.page, 'fa-button');
        this.faButtonAnimation.push({ target: this.faButton, scale: { x: 1.2, y: 1.2 }, duration: 190 });
        this.faButtonAnimation.push({ target: this.faButton, scale: { x: 1.01, y: 1.01 }, duration: 1 });
        this.faButtonAnimationSet = new animation_1.Animation(this.faButtonAnimation, true);
    };
    return appViewModel;
}(observable_1.Observable));
exports.appViewModel = appViewModel;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLXBhZ2Utdmlldy1tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFwcC1wYWdlLXZpZXctbW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrREFBOEQ7QUFDOUQsaURBQTZEO0FBRzdELDJFQUFxRjtBQUlyRixxRUFBd0Y7QUFFeEYsSUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBZSxDQUFDO0FBQ3BFLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQWtCLENBQUM7QUFFcEUsSUFBTSxZQUFZLEdBQWtCO0lBQ25DLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztJQUNMLEtBQUs7SUFDTCxNQUFNO0lBQ04sS0FBSztJQUNMLEtBQUs7SUFDTCxLQUFLO0lBQ0wsS0FBSztDQUNMLENBQUE7QUFHRDtJQUFrQyxnQ0FBVTtJQVN4QyxzQkFBWSxJQUFVO1FBQXRCLFlBQ0ksaUJBQU8sU0F1QlY7UUFoQ00sa0JBQVksR0FBeUIsSUFBSSxrQ0FBZSxFQUFFLENBQUM7UUFHM0QsdUJBQWlCLEdBQStCLElBQUksS0FBSyxFQUF1QixDQUFDO1FBUXBGLEtBQUksQ0FBQyw0QkFBNEIsR0FBYSxrQkFBVyxDQUFDLElBQUksRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO1FBQ3pGLEtBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLEtBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNmLElBQUEsNkJBQUcsQ0FBeUI7UUFFcEMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUM7YUFDeEIsSUFBSSxDQUFDLFVBQUMsTUFBVztZQUNkLEtBQUssSUFBSSxHQUFHLElBQUksTUFBTSxDQUFDLEtBQUssRUFBRTtnQkFFMUIsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQztxQkFDN0QsSUFBSSxDQUFDLFVBQUEsTUFBTTtvQkFDUixJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO29CQUV2QixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDMUIsR0FBRyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQztvQkFDbEUsR0FBRyxDQUFDLFVBQVUsR0FBRyxLQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsU0FBUyxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDbEYsS0FBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUN6QyxDQUFDLENBQUMsQ0FBQTthQUNMO1FBQ0wsQ0FBQyxDQUFDLENBQUE7O0lBRWQsQ0FBQztJQUVNLDZCQUFNLEdBQWIsVUFBYyxJQUFJO1FBQ2QsSUFBTSxJQUFJLEdBQVMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDcEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLGNBQU0sT0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyw0REFBNEQsQ0FBQyxFQUFqRixDQUFpRixDQUFDLENBQUE7SUFDbEksQ0FBQztJQUVPLGtDQUFXLEdBQW5CLFVBQW9CLElBQVU7UUFDMUIsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbkYsQ0FBQztJQUVNLHVDQUFnQixHQUF2QixVQUF3QixJQUFtQjtRQUN2QyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRU8saUNBQVUsR0FBbEIsVUFBbUIsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsT0FBTztRQUM3QyxPQUFPLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLFNBQVMsR0FBRyxLQUFLLEdBQUcsT0FBTyxDQUFDLENBQUM7SUFDbEYsQ0FBQztJQUVPLHNDQUFlLEdBQXZCO1FBQ0ksSUFBSSxDQUFDLFFBQVEsR0FBVyxrQkFBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFFNUQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxFQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ2hHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsRUFBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUVoRyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxxQkFBUyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1RSxDQUFDO0lBQ0wsbUJBQUM7QUFBRCxDQUFDLEFBN0RELENBQWtDLHVCQUFVLEdBNkQzQztBQTdEWSxvQ0FBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy9kYXRhL29ic2VydmFibGVcIjtcclxuaW1wb3J0IHsgUGFnZSwgZ2V0Vmlld0J5SWQgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy91aS9wYWdlXCI7XHJcbmltcG9ydCB7IG15RmlyZWJhc2UgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvZmlyZWJhc2VcIjtcclxuaW1wb3J0IHsgSXRlbUV2ZW50RGF0YSwgTGlzdFZpZXcgfSBmcm9tIFwidG5zLWNvcmUtbW9kdWxlcy91aS9saXN0LXZpZXdcIjtcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZUFycmF5LCBDaGFuZ2VkRGF0YSB9IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL2RhdGEvb2JzZXJ2YWJsZS1hcnJheVwiXHJcbmltcG9ydCBVc2VyVmlld01vZGVsIGZyb20gXCIuLi8uLi8uLi92aWV3bW9kZWxzL3VzZXJcIjtcclxuaW1wb3J0IHsgUmFkTGlzdFZpZXcsIExpc3RWaWV3TG9hZE9uRGVtYW5kTW9kZSB9IGZyb20gXCJuYXRpdmVzY3JpcHQtdWktbGlzdHZpZXdcIjtcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcInRucy1jb3JlLW1vZHVsZXMvdWkvYnV0dG9uL2J1dHRvblwiO1xyXG5pbXBvcnQgeyBBbmltYXRpb25EZWZpbml0aW9uLCBBbmltYXRpb259IGZyb20gXCJ0bnMtY29yZS1tb2R1bGVzL3VpL2FuaW1hdGlvbi9hbmltYXRpb25cIjtcclxuXHJcbmNvbnN0IGZpcmViYXNlID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbHMvZmlyZWJhc2UnKS5JIGFzIG15RmlyZWJhc2U7XHJcbmNvbnN0IHVzZXIgPSByZXF1aXJlKCcuLi8uLi8uLi92aWV3bW9kZWxzL3VzZXInKS5JIGFzIFVzZXJWaWV3TW9kZWw7XHJcblxyXG5jb25zdCBtb250aFN0cmluZ3M6IEFycmF5PHN0cmluZz4gPSBbXHJcblx0XCJKYW5cIixcclxuXHRcIkZlYlwiLFxyXG5cdFwiTWFyXCIsXHJcblx0XCJBcHJcIixcclxuXHRcIk1heVwiLFxyXG5cdFwiSnVuXCIsXHJcblx0XCJKdWxcIixcclxuXHRcIkF1Z3RcIixcclxuXHRcIlNlcFwiLFxyXG5cdFwiT2N0XCIsXHJcblx0XCJOb3ZcIixcclxuXHRcIkRlY1wiXHJcbl1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgYXBwVmlld01vZGVsIGV4dGVuZHMgT2JzZXJ2YWJsZSB7XHJcbiAgICBwdWJsaWMgYXBwb2ludG1lbnRzOiBPYnNlcnZhYmxlQXJyYXk8YW55PiA9IG5ldyBPYnNlcnZhYmxlQXJyYXkoKTtcclxuICAgIHB1YmxpYyB1cGNvbWluZ0FwcG9pbnRtZW50c0xpc3RWaWV3OiBMaXN0VmlldztcclxuICAgIHB1YmxpYyBmYUJ1dHRvbjogQnV0dG9uO1xyXG4gICAgcHVibGljIGZhQnV0dG9uQW5pbWF0aW9uOiBBcnJheTxBbmltYXRpb25EZWZpbml0aW9uPiA9IG5ldyBBcnJheTxBbmltYXRpb25EZWZpbml0aW9uPigpO1xyXG4gICAgcHVibGljIGZhQnV0dG9uQW5pbWF0aW9uU2V0OiBBbmltYXRpb247XHJcblxyXG4gICAgcHJpdmF0ZSBwYWdlOiBQYWdlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBhZ2U6IFBhZ2UpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG5cclxuICAgICAgICB0aGlzLnVwY29taW5nQXBwb2ludG1lbnRzTGlzdFZpZXcgPSA8TGlzdFZpZXc+Z2V0Vmlld0J5SWQocGFnZSwgJ3VwY29taW5nLWFwcG9pbnRtZW50cycpO1xyXG4gICAgICAgIHRoaXMucGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgdGhpcy5zZXR1cEFuaW1hdGlvbnMoKTtcclxuICAgICAgICBjb25zdCB7IHVpZCB9ID0gdXNlci5nZXRUb3RhbERhdGEoKTtcclxuXHJcbiAgICAgICAgZmlyZWJhc2UuZ2V0QXBwb2ludG1lbnRzKHVpZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gcmVzdWx0LnZhbHVlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZpcmViYXNlLmdldFZhbHVlRmlyZWJhc2UoJ2FwcG9pbnRtZW50cy8nICsgcmVzdWx0LnZhbHVlW2tleV0ua2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFwcCA9IHJlc3VsdC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmZ1bGxOYW1lID0gYXBwLnJlY2lldmVyRmlyc3ROYW1lICsgJyAnICsgYXBwLnJlY2lldmVyTGFzdE5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAudGltZVN0cmluZyA9IHRoaXMuX3BhcnNlRGF0ZShhcHAuZGF0ZSwgYXBwLm1vbnRoLCBhcHAuc3RhcnRUaW1lLCBhcHAuZW5kVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcG9pbnRtZW50cy5wdXNoKHJlc3VsdC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZhYlRhcChhcmdzKSB7XHJcbiAgICAgICAgY29uc3QgcGFnZTogUGFnZSA9IGFyZ3Mub2JqZWN0LnBhZ2U7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJjbGlja1wiKTtcclxuICAgICAgICB0aGlzLmZhQnV0dG9uQW5pbWF0aW9uU2V0LnBsYXkoKS50aGVuKCgpID0+IHBhZ2UuZnJhbWUubmF2aWdhdGUoXCIvdmlld3MvaG9tZS9hcHAtcGFnZS9jaG9vc2UtbWVudG9yLXBhZ2UvY2hvb3NlLW1lbnRvci1wYWdlXCIpKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2RhdGVQYXJzZXIoZGF0ZTogRGF0ZSkge1xyXG4gICAgICAgIHJldHVybiAoZGF0ZS5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIGRhdGUuZ2V0RGF0ZSgpICsgXCIvXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uQXBwb2ludG1lbnRUYXAoYXJnczogSXRlbUV2ZW50RGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGFyZ3MuaW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3BhcnNlRGF0ZShkYXksIG1vbnRoLCBzdGFydFRpbWUsIGVuZFRpbWUpIHtcclxuICAgICAgICByZXR1cm4gKG1vbnRoU3RyaW5nc1ttb250aF0gKyAnICcgKyBkYXkgKyAnLCAnICsgc3RhcnRUaW1lICsgJyAtICcgKyBlbmRUaW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldHVwQW5pbWF0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmZhQnV0dG9uID0gPEJ1dHRvbj5nZXRWaWV3QnlJZCh0aGlzLnBhZ2UsICdmYS1idXR0b24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5mYUJ1dHRvbkFuaW1hdGlvbi5wdXNoKHt0YXJnZXQ6IHRoaXMuZmFCdXR0b24sIHNjYWxlOiB7IHg6IDEuMiwgeTogMS4yIH0sIGR1cmF0aW9uOiAxOTAgfSk7XHJcbiAgICAgICAgdGhpcy5mYUJ1dHRvbkFuaW1hdGlvbi5wdXNoKHt0YXJnZXQ6IHRoaXMuZmFCdXR0b24sIHNjYWxlOiB7IHg6IDEuMDEsIHk6IDEuMDEgfSwgZHVyYXRpb246IDEgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuZmFCdXR0b25BbmltYXRpb25TZXQgPSBuZXcgQW5pbWF0aW9uKHRoaXMuZmFCdXR0b25BbmltYXRpb24sIHRydWUpO1xyXG4gICAgfVxyXG59Il19